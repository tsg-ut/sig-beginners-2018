# TSG2018年Sセメスター初心者分科会\#5

今回はクラス。一応Pythonについては最終回にしようかなと思っています。

### Classとは
Classはいくつかの変数やメソッド（関数）をまとめて1つのグループとして扱えるものです（僕のイメージ）。Python含むオブジェクト指向系と強く結びつきがあると思います（個人の見解）。

例えば、ゲームを作る際に各プレイヤーの行う動作は1グループにまとまっていると都合が良いです。特に数多くのプレイヤーを動かす際（例えばボンバーマンなど）では各ターンごとに各プレイヤーの動作を行う関数を呼びます。

取り敢えず長文書くのもあれなので、コード例を出していこうと思います。
```python
class Human:
    name = ""
    def setName(self, name):
        self.name = name
    def Greet(self):
        print("%s says \"Hello!\""%self.name)

fiord = Human()
fiord.setName("fiord")
fiord.Greet() # ここで挨拶してくれる
```
これは何となく分かるかなと思います。`self`というのはクラスそのものを指し、今回の例では`self.name = fiord.name`と解釈してもらって問題ないと思います。この時、`self.name`を「属性（アトリビュート）」、`self.function(今回の例ではsetNameやGreet)`を「メソッド」といいます。ただ、そんな用語はどうでもいいのです。

因みに、`name = ""`で初期化をしていますが、無くてもsetNameをちゃんと最初に持ってくればGreetはちゃんと動作します。今回の例では`fiord`というグループの中に値をちゃんと入れているので。ここで、過去にやった似たやつと整理をします。
```python
a=3
def f():
    a = a + 2
f()
print(a) # 答えは何ですか？
```

これの答えは3です。ここで重要なのは、「関数外の変数は内部へ持ち込めるけど、値をコピーした別のものを使う」という点です。

つまり、関数内で`a = a + 2`をする際に`a`を外側から引っ張っています。そのため、その後`a = 5`となります。ただ、この`a(=5)`は関数内でしか使えない（スコープの問題）ので、関数の外でaを見ても何も変わっていません。

結果を反映させたいときには`global`を使うと外側のものそのものを持ってきてくれるんでした。

さて、肝心のクラスの方ですが、これは「メソッド内にて`self`でアクセスする際は`global`扱い」されます。つまり、そのクラスのメソッドの中ではそのクラスの属性にはアクセスが可能です。ただ、使いたいときは関数の引数に`self`を入れましょう。

__問題__ 何かメソッドを持つクラスを作ってください。

### コンストラクタとデストラクタ
コンストラクタとは「クラスオブジェクトが生成されるときに呼ばれる関数」、デストラクタは「クラスオブジェクトが削除されるときに呼ばれる関数」です。

以下のコードを見てみます。
```python
class Human:
    def __init__(self, name):
        self.name = name
        print("your name is %s!"%self.name)
    
    def __del__(self):
        print("boodbye %s!"%self.name)
    
    def Greet(self):
        print("%s says \"Hello!\""%self.name)

fiord = Human("fiord")  #__init__が呼ばれる
fiord.Greet()
del fiord   #__del__が呼ばれる
```
`del`はオブジェクトを削除するコマンドです。配列などでも使えます。
```python
>>> a=[1,2,3,4,5]
>>> del a[3]
>>> a
[1, 2, 3, 5]
```

コンストラクタは必ず呼ばれます。しかし、必ずしも定義する必要はありません（元々定義してあり、それを書き直す感じです）。一方、デストラクタは必ずしも呼ばれる保証がありません。そのため、基本的に定義することはありません。

__問題__ さっき作ったクラスにコンストラクタとデストラクタを定義してください。

### 継承
ゲームで自キャラの他にCPUが欲しいです。